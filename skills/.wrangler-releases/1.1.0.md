---
version: "1.1.0"
releaseDate: "2025-11-18"
breakingChanges: true
migrationRequired: true
---

# Wrangler v1.1.0 - Centralized .wrangler/ Directory

## Breaking Changes

### Directory Structure Refactoring

All governance files moved from project root to `.wrangler/` directory for better organization and reduced root-level clutter:

**Directory Migrations**:
- `issues/` → `.wrangler/issues/`
- `specifications/` → `.wrangler/specifications/`
- `memos/` → `.wrangler/memos/`

**Governance File Migrations**:
- `specifications/_CONSTITUTION.md` → `.wrangler/governance/CONSTITUTION.md`
- `specifications/_ROADMAP.md` → `.wrangler/governance/ROADMAP.md`
- `specifications/_ROADMAP__NEXT_STEPS.md` → `.wrangler/governance/ROADMAP__NEXT_STEPS.md`

### Constitution Frontmatter Requirement

Constitution now REQUIRES version tracking in frontmatter:

```yaml
---
wranglerVersion: "1.1.0"
lastUpdated: "2025-11-18"
---
```

**Impact**: Existing constitutions without frontmatter will be assumed to be v1.0.0.

### MCP Server Configuration Changes

MCP server now looks for issues in `.wrangler/issues/` and specifications in `.wrangler/specifications/` by default.

**Configuration Override**: Set environment variables to use custom paths:
- `WRANGLER_ISSUES_DIRECTORY`: Override issues directory (relative to workspace root)
- `WRANGLER_SPECIFICATIONS_DIRECTORY`: Override specifications directory (relative to workspace root)

## Migration Requirements

### Automatic Migration (Recommended)

Run `/update-yourself` command for step-by-step LLM-driven migration instructions.

### Manual Migration Steps

If `WRANGLER_SKIP_MIGRATION=true` is set:

1. **Create .wrangler/ directory structure**:
   ```bash
   mkdir -p .wrangler/{issues,specifications,memos,governance,cache,config}
   ```

2. **Move existing directories**:
   ```bash
   # Move issues
   if [ -d "issues" ]; then
     mv issues .wrangler/
   fi

   # Move specifications
   if [ -d "specifications" ]; then
     mv specifications .wrangler/
   fi

   # Move memos
   if [ -d "memos" ]; then
     mv memos .wrangler/
   fi
   ```

3. **Move governance files**:
   ```bash
   # Move constitution
   if [ -f ".wrangler/specifications/_CONSTITUTION.md" ]; then
     mv .wrangler/specifications/_CONSTITUTION.md .wrangler/governance/CONSTITUTION.md
   fi

   # Move roadmap
   if [ -f ".wrangler/specifications/_ROADMAP.md" ]; then
     mv .wrangler/specifications/_ROADMAP.md .wrangler/governance/ROADMAP.md
   fi

   # Move next steps
   if [ -f ".wrangler/specifications/_ROADMAP__NEXT_STEPS.md" ]; then
     mv .wrangler/specifications/_ROADMAP__NEXT_STEPS.md .wrangler/governance/ROADMAP__NEXT_STEPS.md
   fi
   ```

4. **Update constitution frontmatter**:
   - Add frontmatter to `.wrangler/governance/CONSTITUTION.md`:
     ```yaml
     ---
     wranglerVersion: "1.1.0"
     lastUpdated: "2025-11-18"
     ---
     ```

5. **Verify migration**:
   ```bash
   # Run governance verification
   /wrangler:verify-governance

   # Should report all files found in new locations
   ```

6. **Commit changes**:
   ```bash
   git add .wrangler/
   git commit -m "Migrate to .wrangler/ directory structure (v1.1.0)"
   ```

## New Features

### Versioning System
- **Automatic version detection**: Startup skill checks project version on session start
- **Release notes tracking**: All releases documented in `skills/.wrangler-releases/`
- **Breaking change detection**: Automatic detection of version gaps with breaking changes
- **Self-updating**: `/update-yourself` command provides LLM-driven migration instructions

### Configuration Management
- **Cache settings**: Configurable cache behavior in `.wrangler/cache/settings.json`
- **Runtime state**: Session state tracking in `.wrangler/config/runtime.json`
- **Environment overrides**: Support for custom directory locations via env vars

### New Skills
- **wrangler:startup-checklist**: Validates project version on session start
  - Reports: SUCCESS (up to date), WARN (non-breaking updates), OUTDATED (breaking changes)
  - Auto-runs on session start (unless `WRANGLER_SKIP_VERSION_CHECK=true`)

### New Commands
- **/update-yourself**: Generates migration instructions for version gaps
  - Detects breaking changes across versions
  - Provides step-by-step instructions optimized for AI execution
  - Includes verification steps and rollback instructions

## Affected Skills

### Updated Skills (Breaking Changes)

**Governance Skills**:
- `skills/governance/initialize-governance/SKILL.md` - Now creates `.wrangler/governance/` structure
- `skills/governance/verify-governance/SKILL.md` - Checks new locations
- `skills/governance/check-constitutional-alignment/SKILL.md` - Reads from `.wrangler/governance/`
- `skills/governance/refresh-metrics/SKILL.md` - Scans new directories
- `skills/governance/constitution/SKILL.md` - Templates updated with frontmatter

**Session Hooks**:
- `hooks/session-start.sh` - Initializes `.wrangler/` structure, runs startup skill

**Templates**:
- `skills/governance/constitution/templates/_CONSTITUTION.md` - Added version frontmatter
- All governance templates now reference `.wrangler/` paths

### New Skills
- `skills/wrangler/startup-checklist/SKILL.md` - Version detection and reporting

### Unchanged Skills

All testing, debugging, and collaboration skills remain unchanged (no breaking changes).

## Directory Structure (v1.1.0)

```
project-root/
└── .wrangler/                 # All wrangler-managed files
    ├── issues/                # Issue tracking (moved from root)
    ├── specifications/        # Specifications (moved from root)
    ├── memos/                 # Reference material (moved from root)
    ├── governance/            # Governance files (new location)
    │   ├── CONSTITUTION.md    # Moved from specifications/_CONSTITUTION.md
    │   ├── ROADMAP.md         # Moved from specifications/_ROADMAP.md
    │   └── ROADMAP__NEXT_STEPS.md
    ├── cache/                 # Cache configuration (new)
    │   └── settings.json
    └── config/                # Runtime configuration (new)
        └── runtime.json
```

## Upgrade Path

### From v1.0.0

1. **Automatic** (recommended):
   - Session hook will detect v1.0.0 and auto-migrate on next startup
   - To skip: Set `WRANGLER_SKIP_MIGRATION=true`

2. **Manual**:
   - Run `/update-yourself` for instructions
   - Follow migration steps above
   - Verify with startup skill

### Verification

After migration, run startup skill:
- Should report: "✅ Wrangler version up to date (v1.1.0)"
- Run `/wrangler:verify-governance` - should pass all checks

## Rollback Instructions

If migration causes issues:

1. **Restore from git**:
   ```bash
   git reset --hard HEAD~1  # Undo migration commit
   ```

2. **Set skip flag**:
   ```bash
   export WRANGLER_SKIP_MIGRATION=true
   export WRANGLER_SKIP_VERSION_CHECK=true
   ```

3. **Report issue**:
   - Create issue at: https://github.com/wrangler-marketplace/wrangler/issues
   - Include: Error messages, project structure, git diff

## Deprecation Warnings

### Root-level Directories (Deprecated)

Support for root-level `issues/`, `specifications/`, `memos/` will be maintained for **6 months** with warnings:

**Warning message**:
```
⚠️ DEPRECATED: Governance files at project root
   Issues found in: issues/ (should be .wrangler/issues/)
   Run /update-yourself to migrate to v1.1.0 structure

   Root-level support will be removed in v2.0.0 (estimated: 2025-05-18)
```

**Timeline**:
- v1.1.0 (2025-11-18): Root-level deprecated, warnings issued
- v1.2.0 - v1.9.0: Warnings continue, both locations supported
- v2.0.0 (estimated 2025-05-18): Root-level support removed entirely

## Configuration Defaults

### Cache Settings

Default `.wrangler/cache/settings.json`:
```json
{
  "issueIndexing": {
    "enabled": true,
    "rebuildInterval": 3600,
    "maxCacheAge": 86400
  },
  "searchOptimization": {
    "enabled": true,
    "minQueryLength": 3
  },
  "performanceTracking": {
    "enabled": false,
    "sampleRate": 0.1
  }
}
```

### Runtime Configuration

Default `.wrangler/config/runtime.json`:
```json
{
  "sessionId": "[auto-generated]",
  "lastStartup": "[timestamp]",
  "wranglerVersion": "1.1.0",
  "migrationsApplied": ["1.1.0-directory-structure"]
}
```

## Known Limitations

### Post-Migration Issues

1. **Relative path references**: Code with hardcoded paths to `issues/` or `specifications/` will break
   - **Fix**: Update to use `.wrangler/issues/` or `.wrangler/specifications/`

2. **Git history**: Moving files loses git history on moved lines
   - **Workaround**: Use `git log --follow` to trace file history

3. **IDE integration**: Some IDEs may need workspace refresh after migration
   - **Fix**: Reload IDE workspace after migration

## Support

**Questions?** Create issue at: https://github.com/wrangler-marketplace/wrangler/issues

**Migration problems?** Include:
- Project structure before migration
- Error messages
- Output of `/wrangler:verify-governance`
- Git status

---

**Migration Priority**: Critical (breaking changes affect all governance features)
**Recommended Timeline**: Migrate within 1 week of v1.1.0 release
