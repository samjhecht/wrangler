# Git Hooks (Pattern B: Version-Controlled)

This project uses version-controlled git hooks stored in `.wrangler/git-hooks/`.

## For New Team Members

Run the install script to set up git hooks on your machine:

```bash
./scripts/install-hooks.sh
```

This creates symlinks from `.git/hooks/` to the version-controlled hooks.

## How It Works

```
.wrangler/git-hooks/          # Version-controlled hooks (committed)
├── pre-commit                # Format, lint, unit tests
├── pre-push                  # Full test suite on protected branches
└── commit-msg                # Commit message validation (optional)

scripts/
└── install-hooks.sh          # Install script (creates symlinks)

.git/hooks/                   # Active hooks (symlinks, not committed)
├── pre-commit -> ../../.wrangler/git-hooks/pre-commit
├── pre-push -> ../../.wrangler/git-hooks/pre-push
└── commit-msg -> ../../.wrangler/git-hooks/commit-msg
```

## Why Pattern B?

**Benefits:**
- Hooks are version-controlled and reviewed like code
- Entire team uses identical hooks
- Hook updates are distributed via git pull
- CI/CD can use the same hooks
- History of hook changes preserved

**Trade-offs:**
- Requires running install script after clone
- Symlinks may not work on all Windows setups

## Updating Hooks

1. Edit hooks in `.wrangler/git-hooks/`
2. Test locally
3. Commit changes
4. Team members pull and re-run `./scripts/install-hooks.sh`

## Bypass Mechanism

For TDD RED phase or emergency fixes:

```bash
WRANGLER_SKIP_HOOKS=1 git commit -m "WIP: failing test for feature X"
```

**Note**: This bypass is only available to humans. AI agents cannot set environment variables.

## Configuration

Hook behavior is configured in `.wrangler/hooks-config.json`.

## Troubleshooting

### Hooks Not Running

```bash
# Verify symlinks exist
ls -la .git/hooks/

# Re-run install script
./scripts/install-hooks.sh
```

### Permission Denied

```bash
# Make hooks executable
chmod +x .wrangler/git-hooks/*
```

### Windows Issues

If symlinks don't work on Windows:
1. Enable Developer Mode, or
2. Run Git Bash as Administrator, or
3. Use Pattern A instead (direct hooks in .git/hooks/)

---

*Generated by wrangler git-hooks framework*
